{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.applyMixin = exports.ErrorWithReasonCode = void 0;\nclass ErrorWithReasonCode extends Error {\n  constructor(message, code) {\n    super(message);\n    this.code = code;\n    Object.setPrototypeOf(this, ErrorWithReasonCode.prototype);\n    Object.getPrototypeOf(this).name = 'ErrorWithReasonCode';\n  }\n}\nexports.ErrorWithReasonCode = ErrorWithReasonCode;\nfunction applyMixin(target, mixin) {\n  let includeConstructor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var _a;\n  const inheritanceChain = [mixin];\n  while (true) {\n    const current = inheritanceChain[0];\n    const base = Object.getPrototypeOf(current);\n    if (base === null || base === void 0 ? void 0 : base.prototype) {\n      inheritanceChain.unshift(base);\n    } else {\n      break;\n    }\n  }\n  for (const ctor of inheritanceChain) {\n    for (const prop of Object.getOwnPropertyNames(ctor.prototype)) {\n      if (includeConstructor || prop !== 'constructor') {\n        Object.defineProperty(target.prototype, prop, (_a = Object.getOwnPropertyDescriptor(ctor.prototype, prop)) !== null && _a !== void 0 ? _a : Object.create(null));\n      }\n    }\n  }\n}\nexports.applyMixin = applyMixin;","map":{"version":3,"names":["ErrorWithReasonCode","Error","constructor","message","code","Object","setPrototypeOf","prototype","getPrototypeOf","name","exports","applyMixin","target","mixin","includeConstructor","arguments","length","undefined","inheritanceChain","current","base","unshift","ctor","prop","getOwnPropertyNames","defineProperty","_a","getOwnPropertyDescriptor","create"],"sources":["/Users/jstanton/Coding/FieldDock/FieldDockMain/node_modules/mqtt/src/lib/shared.ts"],"sourcesContent":["import type { Packet } from 'mqtt-packet'\nimport type internal from 'stream'\nimport type MqttClient from './client'\nimport type { IClientOptions } from './client'\n\nexport type DoneCallback = (error?: Error) => void\n\nexport type GenericCallback<T> = (error?: Error, result?: T) => void\n\nexport type VoidCallback = () => void\n\nexport type IStream = internal.Duplex\n\nexport type StreamBuilder = (\n\tclient: MqttClient,\n\topts?: IClientOptions,\n) => IStream\n\nexport type Callback = () => void\n\nexport type PacketHandler = (\n\tclient: MqttClient,\n\tpacket: Packet,\n\tdone?: DoneCallback,\n) => void\n\nexport class ErrorWithReasonCode extends Error {\n\tpublic code: number\n\n\tpublic constructor(message: string, code: number) {\n\t\tsuper(message)\n\t\tthis.code = code\n\n\t\t// We need to set the prototype explicitly\n\t\tObject.setPrototypeOf(this, ErrorWithReasonCode.prototype)\n\t\tObject.getPrototypeOf(this).name = 'ErrorWithReasonCode'\n\t}\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type Constructor<T = {}> = new (...args: any[]) => T\n\nexport function applyMixin(\n\ttarget: Constructor,\n\tmixin: Constructor,\n\tincludeConstructor = false,\n): void {\n\t// Figure out the inheritance chain of the mixin\n\tconst inheritanceChain: Constructor[] = [mixin]\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tconst current = inheritanceChain[0]\n\t\tconst base = Object.getPrototypeOf(current)\n\t\tif (base?.prototype) {\n\t\t\tinheritanceChain.unshift(base)\n\t\t} else {\n\t\t\tbreak\n\t\t}\n\t}\n\tfor (const ctor of inheritanceChain) {\n\t\tfor (const prop of Object.getOwnPropertyNames(ctor.prototype)) {\n\t\t\t// Do not override the constructor\n\t\t\tif (includeConstructor || prop !== 'constructor') {\n\t\t\t\tObject.defineProperty(\n\t\t\t\t\ttarget.prototype,\n\t\t\t\t\tprop,\n\t\t\t\t\tObject.getOwnPropertyDescriptor(ctor.prototype, prop) ??\n\t\t\t\t\t\tObject.create(null),\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;AA0BA,MAAaA,mBAAoB,SAAQC,KAAK;EAG7CC,YAAmBC,OAAe,EAAEC,IAAY;IAC/C,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACC,IAAI,GAAGA,IAAI;IAGhBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEN,mBAAmB,CAACO,SAAS,CAAC;IAC1DF,MAAM,CAACG,cAAc,CAAC,IAAI,CAAC,CAACC,IAAI,GAAG,qBAAqB;EACzD;;AAVDC,OAAA,CAAAV,mBAAA,GAAAA,mBAAA;AAgBA,SAAgBW,UAAUA,CACzBC,MAAmB,EACnBC,KAAkB,EACQ;EAAA,IAA1BC,kBAAkB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;;EAG1B,MAAMG,gBAAgB,GAAkB,CAACL,KAAK,CAAC;EAE/C,OAAO,IAAI,EAAE;IACZ,MAAMM,OAAO,GAAGD,gBAAgB,CAAC,CAAC,CAAC;IACnC,MAAME,IAAI,GAAGf,MAAM,CAACG,cAAc,CAACW,OAAO,CAAC;IAC3C,IAAIC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEb,SAAS,EAAE;MACpBW,gBAAgB,CAACG,OAAO,CAACD,IAAI,CAAC;KAC9B,MAAM;MACN;;;EAGF,KAAK,MAAME,IAAI,IAAIJ,gBAAgB,EAAE;IACpC,KAAK,MAAMK,IAAI,IAAIlB,MAAM,CAACmB,mBAAmB,CAACF,IAAI,CAACf,SAAS,CAAC,EAAE;MAE9D,IAAIO,kBAAkB,IAAIS,IAAI,KAAK,aAAa,EAAE;QACjDlB,MAAM,CAACoB,cAAc,CACpBb,MAAM,CAACL,SAAS,EAChBgB,IAAI,EACJ,CAAAG,EAAA,GAAArB,MAAM,CAACsB,wBAAwB,CAACL,IAAI,CAACf,SAAS,EAAEgB,IAAI,CAAC,cAAAG,EAAA,cAAAA,EAAA,GACpDrB,MAAM,CAACuB,MAAM,CAAC,IAAI,CAAC,CACpB;;;;AAIL;AA9BAlB,OAAA,CAAAC,UAAA,GAAAA,UAAA"},"metadata":{},"sourceType":"script"}