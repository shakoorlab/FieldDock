{"ast":null,"code":"'use strict';\n\nconst {\n  ArrayPrototypePop,\n  Promise\n} = require('../ours/primordials');\nconst {\n  isIterable,\n  isNodeStream,\n  isWebStream\n} = require('../internal/streams/utils');\nconst {\n  pipelineImpl: pl\n} = require('../internal/streams/pipeline');\nconst {\n  finished\n} = require('../internal/streams/end-of-stream');\nrequire('../../lib/stream.js');\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  return new Promise((resolve, reject) => {\n    let signal;\n    let end;\n    const lastArg = streams[streams.length - 1];\n    if (lastArg && typeof lastArg === 'object' && !isNodeStream(lastArg) && !isIterable(lastArg) && !isWebStream(lastArg)) {\n      const options = ArrayPrototypePop(streams);\n      signal = options.signal;\n      end = options.end;\n    }\n    pl(streams, (err, value) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(value);\n      }\n    }, {\n      signal,\n      end\n    });\n  });\n}\nmodule.exports = {\n  finished,\n  pipeline\n};","map":{"version":3,"names":["ArrayPrototypePop","Promise","require","isIterable","isNodeStream","isWebStream","pipelineImpl","pl","finished","pipeline","_len","arguments","length","streams","Array","_key","resolve","reject","signal","end","lastArg","options","err","value","module","exports"],"sources":["/Users/jstanton/Coding/FieldDock/FieldDockMain/node_modules/mqtt/node_modules/readable-stream/lib/stream/promises.js"],"sourcesContent":["'use strict'\n\nconst { ArrayPrototypePop, Promise } = require('../ours/primordials')\nconst { isIterable, isNodeStream, isWebStream } = require('../internal/streams/utils')\nconst { pipelineImpl: pl } = require('../internal/streams/pipeline')\nconst { finished } = require('../internal/streams/end-of-stream')\nrequire('../../lib/stream.js')\nfunction pipeline(...streams) {\n  return new Promise((resolve, reject) => {\n    let signal\n    let end\n    const lastArg = streams[streams.length - 1]\n    if (\n      lastArg &&\n      typeof lastArg === 'object' &&\n      !isNodeStream(lastArg) &&\n      !isIterable(lastArg) &&\n      !isWebStream(lastArg)\n    ) {\n      const options = ArrayPrototypePop(streams)\n      signal = options.signal\n      end = options.end\n    }\n    pl(\n      streams,\n      (err, value) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(value)\n        }\n      },\n      {\n        signal,\n        end\n      }\n    )\n  })\n}\nmodule.exports = {\n  finished,\n  pipeline\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAM;EAAEA,iBAAiB;EAAEC;AAAQ,CAAC,GAAGC,OAAO,CAAC,qBAAqB,CAAC;AACrE,MAAM;EAAEC,UAAU;EAAEC,YAAY;EAAEC;AAAY,CAAC,GAAGH,OAAO,CAAC,2BAA2B,CAAC;AACtF,MAAM;EAAEI,YAAY,EAAEC;AAAG,CAAC,GAAGL,OAAO,CAAC,8BAA8B,CAAC;AACpE,MAAM;EAAEM;AAAS,CAAC,GAAGN,OAAO,CAAC,mCAAmC,CAAC;AACjEA,OAAO,CAAC,qBAAqB,CAAC;AAC9B,SAASO,QAAQA,CAAA,EAAa;EAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAATC,OAAO,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;IAAPF,OAAO,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;EAAA;EAC1B,OAAO,IAAId,OAAO,CAAC,CAACe,OAAO,EAAEC,MAAM,KAAK;IACtC,IAAIC,MAAM;IACV,IAAIC,GAAG;IACP,MAAMC,OAAO,GAAGP,OAAO,CAACA,OAAO,CAACD,MAAM,GAAG,CAAC,CAAC;IAC3C,IACEQ,OAAO,IACP,OAAOA,OAAO,KAAK,QAAQ,IAC3B,CAAChB,YAAY,CAACgB,OAAO,CAAC,IACtB,CAACjB,UAAU,CAACiB,OAAO,CAAC,IACpB,CAACf,WAAW,CAACe,OAAO,CAAC,EACrB;MACA,MAAMC,OAAO,GAAGrB,iBAAiB,CAACa,OAAO,CAAC;MAC1CK,MAAM,GAAGG,OAAO,CAACH,MAAM;MACvBC,GAAG,GAAGE,OAAO,CAACF,GAAG;IACnB;IACAZ,EAAE,CACAM,OAAO,EACP,CAACS,GAAG,EAAEC,KAAK,KAAK;MACd,IAAID,GAAG,EAAE;QACPL,MAAM,CAACK,GAAG,CAAC;MACb,CAAC,MAAM;QACLN,OAAO,CAACO,KAAK,CAAC;MAChB;IACF,CAAC,EACD;MACEL,MAAM;MACNC;IACF,CACF,CAAC;EACH,CAAC,CAAC;AACJ;AACAK,MAAM,CAACC,OAAO,GAAG;EACfjB,QAAQ;EACRC;AACF,CAAC"},"metadata":{},"sourceType":"script"}