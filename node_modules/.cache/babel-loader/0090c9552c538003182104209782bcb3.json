{"ast":null,"code":"import * as React from 'react';\nimport { gridVisibleColumnDefinitionsSelector } from '../columns/gridColumnsSelector';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { gridVisibleSortedRowEntriesSelector } from '../filter/gridFilterSelector';\nimport { useGridVisibleRows } from '../../utils/useGridVisibleRows';\nimport { GRID_CHECKBOX_SELECTION_COL_DEF } from '../../../colDef/gridCheckboxSelectionColDef';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { GridCellModes } from '../../../models/gridEditRowModel';\nimport { isNavigationKey } from '../../../utils/keyboardUtils';\nimport { GRID_DETAIL_PANEL_TOGGLE_FIELD } from '../../../constants/gridDetailPanelToggleField';\nimport { gridPinnedRowsSelector } from '../rows/gridRowsSelector';\n\nfunction enrichPageRowsWithPinnedRows(apiRef, rows) {\n  const pinnedRows = gridPinnedRowsSelector(apiRef) || {};\n  return [...(pinnedRows.top || []), ...rows, ...(pinnedRows.bottom || [])];\n}\n/**\n * @requires useGridSorting (method) - can be after\n * @requires useGridFilter (state) - can be after\n * @requires useGridColumns (state, method) - can be after\n * @requires useGridDimensions (method) - can be after\n * @requires useGridFocus (method) - can be after\n * @requires useGridScroll (method) - can be after\n * @requires useGridColumnSpanning (method) - can be after\n */\n\n\nexport const useGridKeyboardNavigation = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridKeyboardNavigation');\n  const initialCurrentPageRows = useGridVisibleRows(apiRef, props).rows;\n  const currentPageRows = React.useMemo(() => enrichPageRowsWithPinnedRows(apiRef, initialCurrentPageRows), [apiRef, initialCurrentPageRows]);\n  /**\n   * @param {number} colIndex Index of the column to focus\n   * @param {number} rowIndex index of the row to focus\n   * @param {string} closestColumnToUse Which closest column cell to use when the cell is spanned by `colSpan`.\n   * TODO replace with apiRef.current.unstable_moveFocusToRelativeCell()\n   */\n\n  const goToCell = React.useCallback(function (colIndex, rowId) {\n    let closestColumnToUse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'left';\n    const visibleSortedRows = gridVisibleSortedRowEntriesSelector(apiRef);\n    const nextCellColSpanInfo = apiRef.current.unstable_getCellColSpanInfo(rowId, colIndex);\n\n    if (nextCellColSpanInfo && nextCellColSpanInfo.spannedByColSpan) {\n      if (closestColumnToUse === 'left') {\n        colIndex = nextCellColSpanInfo.leftVisibleCellIndex;\n      } else if (closestColumnToUse === 'right') {\n        colIndex = nextCellColSpanInfo.rightVisibleCellIndex;\n      }\n    } // `scrollToIndexes` requires a rowIndex relative to all visible rows.\n    // Those rows do not include pinned rows, but pinned rows do not need scroll anyway.\n\n\n    const rowIndexRelativeToAllRows = visibleSortedRows.findIndex(row => row.id === rowId);\n    logger.debug(`Navigating to cell row ${rowIndexRelativeToAllRows}, col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex,\n      rowIndex: rowIndexRelativeToAllRows\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setCellFocus(rowId, field);\n  }, [apiRef, logger]);\n  const goToHeader = React.useCallback((colIndex, event) => {\n    logger.debug(`Navigating to header col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setColumnHeaderFocus(field, event);\n  }, [apiRef, logger]);\n  const getRowIdFromIndex = React.useCallback(rowIndex => {\n    return currentPageRows[rowIndex].id;\n  }, [currentPageRows]);\n  const handleCellNavigationKeyDown = React.useCallback((params, event) => {\n    const dimensions = apiRef.current.getRootDimensions();\n\n    if (currentPageRows.length === 0 || !dimensions) {\n      return;\n    }\n\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const rowIndexBefore = currentPageRows.findIndex(row => row.id === params.id);\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Enter':\n        {\n          // TODO v6: Remove Enter case because `cellNavigationKeyDown` is not fired by the new editing API\n          // \"Enter\" is only triggered by the row / cell editing feature\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore + 1));\n          }\n\n          break;\n        }\n\n      case 'ArrowUp':\n        {\n          if (rowIndexBefore > firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore - 1));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n\n          break;\n        }\n\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n\n          break;\n        }\n\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      case 'Tab':\n        {\n          // \"Tab\" is only triggered by the row / cell editing feature\n          if (event.shiftKey && colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore), 'left');\n          } else if (!event.shiftKey && colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n\n          break;\n        }\n\n      case ' ':\n        {\n          const field = params.field;\n\n          if (field === GRID_DETAIL_PANEL_TOGGLE_FIELD) {\n            break;\n          }\n\n          const colDef = params.colDef;\n\n          if (colDef && colDef.type === 'treeDataGroup') {\n            break;\n          }\n\n          if (!event.shiftKey && rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'PageDown':\n        {\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'PageUp':\n        {\n          // Go to the first row before going to header\n          const nextRowIndex = Math.max(rowIndexBefore - viewportPageSize, firstRowIndexInPage);\n\n          if (nextRowIndex !== rowIndexBefore && nextRowIndex >= firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(nextRowIndex));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n\n          break;\n        }\n\n      case 'Home':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(firstColIndex, getRowIdFromIndex(firstRowIndexInPage));\n          } else {\n            goToCell(firstColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      case 'End':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(lastColIndex, getRowIdFromIndex(lastRowIndexInPage));\n          } else {\n            goToCell(lastColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleColumnHeaderKeyDown = React.useCallback((params, event) => {\n    const headerTitleNode = event.currentTarget.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n    const isFromInsideContent = !!headerTitleNode && headerTitleNode.contains(event.target);\n\n    if (isFromInsideContent && params.field !== GRID_CHECKBOX_SELECTION_COL_DEF.field) {\n      // When focus is on a nested input, keyboard events have no effect to avoid conflicts with native events.\n      // There is one exception for the checkBoxHeader\n      return;\n    }\n\n    const dimensions = apiRef.current.getRootDimensions();\n\n    if (!dimensions) {\n      return;\n    }\n\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n\n    switch (event.key) {\n      case 'ArrowDown':\n        {\n          if (firstRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(firstRowIndexInPage));\n          }\n\n          break;\n        }\n\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToHeader(colIndexBefore + 1, event);\n          }\n\n          break;\n        }\n\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToHeader(colIndexBefore - 1, event);\n          }\n\n          break;\n        }\n\n      case 'PageDown':\n        {\n          if (firstRowIndexInPage !== null && lastRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(firstRowIndexInPage + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'Home':\n        {\n          goToHeader(firstColIndex, event);\n          break;\n        }\n\n      case 'End':\n        {\n          goToHeader(lastColIndex, event);\n          break;\n        }\n\n      case 'Enter':\n        {\n          if (event.ctrlKey || event.metaKey) {\n            apiRef.current.toggleColumnMenu(params.field);\n          }\n\n          break;\n        }\n\n      case ' ':\n        {\n          // prevent Space event from scrolling\n          break;\n        }\n\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleCellKeyDown = React.useCallback((params, event) => {\n    // Ignore portal\n    if (!event.currentTarget.contains(event.target)) {\n      return;\n    } // Get the most recent params because the cell mode may have changed by another listener\n\n\n    const cellParams = apiRef.current.getCellParams(params.id, params.field);\n\n    if (cellParams.cellMode !== GridCellModes.Edit && isNavigationKey(event.key)) {\n      apiRef.current.publishEvent('cellNavigationKeyDown', cellParams, event);\n    }\n  }, [apiRef]);\n  useGridApiEventHandler(apiRef, 'cellNavigationKeyDown', handleCellNavigationKeyDown);\n  useGridApiEventHandler(apiRef, 'columnHeaderKeyDown', handleColumnHeaderKeyDown);\n  useGridApiEventHandler(apiRef, 'cellKeyDown', handleCellKeyDown);\n};","map":{"version":3,"names":["React","gridVisibleColumnDefinitionsSelector","useGridLogger","useGridApiEventHandler","gridVisibleSortedRowEntriesSelector","useGridVisibleRows","GRID_CHECKBOX_SELECTION_COL_DEF","gridClasses","GridCellModes","isNavigationKey","GRID_DETAIL_PANEL_TOGGLE_FIELD","gridPinnedRowsSelector","enrichPageRowsWithPinnedRows","apiRef","rows","pinnedRows","top","bottom","useGridKeyboardNavigation","props","logger","initialCurrentPageRows","currentPageRows","useMemo","goToCell","useCallback","colIndex","rowId","closestColumnToUse","visibleSortedRows","nextCellColSpanInfo","current","unstable_getCellColSpanInfo","spannedByColSpan","leftVisibleCellIndex","rightVisibleCellIndex","rowIndexRelativeToAllRows","findIndex","row","id","debug","scrollToIndexes","rowIndex","field","getVisibleColumns","setCellFocus","goToHeader","event","setColumnHeaderFocus","getRowIdFromIndex","handleCellNavigationKeyDown","params","dimensions","getRootDimensions","length","viewportPageSize","unstable_getViewportPageSize","colIndexBefore","getColumnIndex","rowIndexBefore","firstRowIndexInPage","lastRowIndexInPage","firstColIndex","lastColIndex","shouldPreventDefault","key","shiftKey","colDef","type","Math","min","nextRowIndex","max","ctrlKey","metaKey","preventDefault","handleColumnHeaderKeyDown","headerTitleNode","currentTarget","querySelector","columnHeaderTitleContainerContent","isFromInsideContent","contains","target","toggleColumnMenu","handleCellKeyDown","cellParams","getCellParams","cellMode","Edit","publishEvent"],"sources":["/Users/jstanton/Desktop/react-admin-dashboard/node_modules/@mui/x-data-grid/hooks/features/keyboardNavigation/useGridKeyboardNavigation.js"],"sourcesContent":["import * as React from 'react';\nimport { gridVisibleColumnDefinitionsSelector } from '../columns/gridColumnsSelector';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { gridVisibleSortedRowEntriesSelector } from '../filter/gridFilterSelector';\nimport { useGridVisibleRows } from '../../utils/useGridVisibleRows';\nimport { GRID_CHECKBOX_SELECTION_COL_DEF } from '../../../colDef/gridCheckboxSelectionColDef';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { GridCellModes } from '../../../models/gridEditRowModel';\nimport { isNavigationKey } from '../../../utils/keyboardUtils';\nimport { GRID_DETAIL_PANEL_TOGGLE_FIELD } from '../../../constants/gridDetailPanelToggleField';\nimport { gridPinnedRowsSelector } from '../rows/gridRowsSelector';\n\nfunction enrichPageRowsWithPinnedRows(apiRef, rows) {\n  const pinnedRows = gridPinnedRowsSelector(apiRef) || {};\n  return [...(pinnedRows.top || []), ...rows, ...(pinnedRows.bottom || [])];\n}\n/**\n * @requires useGridSorting (method) - can be after\n * @requires useGridFilter (state) - can be after\n * @requires useGridColumns (state, method) - can be after\n * @requires useGridDimensions (method) - can be after\n * @requires useGridFocus (method) - can be after\n * @requires useGridScroll (method) - can be after\n * @requires useGridColumnSpanning (method) - can be after\n */\n\n\nexport const useGridKeyboardNavigation = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridKeyboardNavigation');\n  const initialCurrentPageRows = useGridVisibleRows(apiRef, props).rows;\n  const currentPageRows = React.useMemo(() => enrichPageRowsWithPinnedRows(apiRef, initialCurrentPageRows), [apiRef, initialCurrentPageRows]);\n  /**\n   * @param {number} colIndex Index of the column to focus\n   * @param {number} rowIndex index of the row to focus\n   * @param {string} closestColumnToUse Which closest column cell to use when the cell is spanned by `colSpan`.\n   * TODO replace with apiRef.current.unstable_moveFocusToRelativeCell()\n   */\n\n  const goToCell = React.useCallback((colIndex, rowId, closestColumnToUse = 'left') => {\n    const visibleSortedRows = gridVisibleSortedRowEntriesSelector(apiRef);\n    const nextCellColSpanInfo = apiRef.current.unstable_getCellColSpanInfo(rowId, colIndex);\n\n    if (nextCellColSpanInfo && nextCellColSpanInfo.spannedByColSpan) {\n      if (closestColumnToUse === 'left') {\n        colIndex = nextCellColSpanInfo.leftVisibleCellIndex;\n      } else if (closestColumnToUse === 'right') {\n        colIndex = nextCellColSpanInfo.rightVisibleCellIndex;\n      }\n    } // `scrollToIndexes` requires a rowIndex relative to all visible rows.\n    // Those rows do not include pinned rows, but pinned rows do not need scroll anyway.\n\n\n    const rowIndexRelativeToAllRows = visibleSortedRows.findIndex(row => row.id === rowId);\n    logger.debug(`Navigating to cell row ${rowIndexRelativeToAllRows}, col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex,\n      rowIndex: rowIndexRelativeToAllRows\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setCellFocus(rowId, field);\n  }, [apiRef, logger]);\n  const goToHeader = React.useCallback((colIndex, event) => {\n    logger.debug(`Navigating to header col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setColumnHeaderFocus(field, event);\n  }, [apiRef, logger]);\n  const getRowIdFromIndex = React.useCallback(rowIndex => {\n    return currentPageRows[rowIndex].id;\n  }, [currentPageRows]);\n  const handleCellNavigationKeyDown = React.useCallback((params, event) => {\n    const dimensions = apiRef.current.getRootDimensions();\n\n    if (currentPageRows.length === 0 || !dimensions) {\n      return;\n    }\n\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const rowIndexBefore = currentPageRows.findIndex(row => row.id === params.id);\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Enter':\n        {\n          // TODO v6: Remove Enter case because `cellNavigationKeyDown` is not fired by the new editing API\n          // \"Enter\" is only triggered by the row / cell editing feature\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore + 1));\n          }\n\n          break;\n        }\n\n      case 'ArrowUp':\n        {\n          if (rowIndexBefore > firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore - 1));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n\n          break;\n        }\n\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n\n          break;\n        }\n\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      case 'Tab':\n        {\n          // \"Tab\" is only triggered by the row / cell editing feature\n          if (event.shiftKey && colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore), 'left');\n          } else if (!event.shiftKey && colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n\n          break;\n        }\n\n      case ' ':\n        {\n          const field = params.field;\n\n          if (field === GRID_DETAIL_PANEL_TOGGLE_FIELD) {\n            break;\n          }\n\n          const colDef = params.colDef;\n\n          if (colDef && colDef.type === 'treeDataGroup') {\n            break;\n          }\n\n          if (!event.shiftKey && rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'PageDown':\n        {\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'PageUp':\n        {\n          // Go to the first row before going to header\n          const nextRowIndex = Math.max(rowIndexBefore - viewportPageSize, firstRowIndexInPage);\n\n          if (nextRowIndex !== rowIndexBefore && nextRowIndex >= firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(nextRowIndex));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n\n          break;\n        }\n\n      case 'Home':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(firstColIndex, getRowIdFromIndex(firstRowIndexInPage));\n          } else {\n            goToCell(firstColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      case 'End':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(lastColIndex, getRowIdFromIndex(lastRowIndexInPage));\n          } else {\n            goToCell(lastColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleColumnHeaderKeyDown = React.useCallback((params, event) => {\n    const headerTitleNode = event.currentTarget.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n    const isFromInsideContent = !!headerTitleNode && headerTitleNode.contains(event.target);\n\n    if (isFromInsideContent && params.field !== GRID_CHECKBOX_SELECTION_COL_DEF.field) {\n      // When focus is on a nested input, keyboard events have no effect to avoid conflicts with native events.\n      // There is one exception for the checkBoxHeader\n      return;\n    }\n\n    const dimensions = apiRef.current.getRootDimensions();\n\n    if (!dimensions) {\n      return;\n    }\n\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n\n    switch (event.key) {\n      case 'ArrowDown':\n        {\n          if (firstRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(firstRowIndexInPage));\n          }\n\n          break;\n        }\n\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToHeader(colIndexBefore + 1, event);\n          }\n\n          break;\n        }\n\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToHeader(colIndexBefore - 1, event);\n          }\n\n          break;\n        }\n\n      case 'PageDown':\n        {\n          if (firstRowIndexInPage !== null && lastRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(firstRowIndexInPage + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'Home':\n        {\n          goToHeader(firstColIndex, event);\n          break;\n        }\n\n      case 'End':\n        {\n          goToHeader(lastColIndex, event);\n          break;\n        }\n\n      case 'Enter':\n        {\n          if (event.ctrlKey || event.metaKey) {\n            apiRef.current.toggleColumnMenu(params.field);\n          }\n\n          break;\n        }\n\n      case ' ':\n        {\n          // prevent Space event from scrolling\n          break;\n        }\n\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleCellKeyDown = React.useCallback((params, event) => {\n    // Ignore portal\n    if (!event.currentTarget.contains(event.target)) {\n      return;\n    } // Get the most recent params because the cell mode may have changed by another listener\n\n\n    const cellParams = apiRef.current.getCellParams(params.id, params.field);\n\n    if (cellParams.cellMode !== GridCellModes.Edit && isNavigationKey(event.key)) {\n      apiRef.current.publishEvent('cellNavigationKeyDown', cellParams, event);\n    }\n  }, [apiRef]);\n  useGridApiEventHandler(apiRef, 'cellNavigationKeyDown', handleCellNavigationKeyDown);\n  useGridApiEventHandler(apiRef, 'columnHeaderKeyDown', handleColumnHeaderKeyDown);\n  useGridApiEventHandler(apiRef, 'cellKeyDown', handleCellKeyDown);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}