{"ast":null,"code":"// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototype inheritance, this class\n// prototypically inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\nconst {\n  ObjectDefineProperties,\n  ObjectGetOwnPropertyDescriptor,\n  ObjectKeys,\n  ObjectSetPrototypeOf\n} = require('../../ours/primordials');\nmodule.exports = Duplex;\nconst Readable = require('./readable');\nconst Writable = require('./writable');\nObjectSetPrototypeOf(Duplex.prototype, Readable.prototype);\nObjectSetPrototypeOf(Duplex, Readable);\n{\n  const keys = ObjectKeys(Writable.prototype);\n  // Allow the keys array to be GC'ed.\n  for (let i = 0; i < keys.length; i++) {\n    const method = keys[i];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  if (options) {\n    this.allowHalfOpen = options.allowHalfOpen !== false;\n    if (options.readable === false) {\n      this._readableState.readable = false;\n      this._readableState.ended = true;\n      this._readableState.endEmitted = true;\n    }\n    if (options.writable === false) {\n      this._writableState.writable = false;\n      this._writableState.ending = true;\n      this._writableState.ended = true;\n      this._writableState.finished = true;\n    }\n  } else {\n    this.allowHalfOpen = true;\n  }\n}\nObjectDefineProperties(Duplex.prototype, {\n  writable: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writable')\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableHighWaterMark')\n  },\n  writableObjectMode: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableObjectMode')\n  },\n  writableBuffer: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableBuffer')\n  },\n  writableLength: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableLength')\n  },\n  writableFinished: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableFinished')\n  },\n  writableCorked: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableCorked')\n  },\n  writableEnded: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableEnded')\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableNeedDrain')\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return false;\n      }\n      return this._readableState.destroyed && this._writableState.destroyed;\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      if (this._readableState && this._writableState) {\n        this._readableState.destroyed = value;\n        this._writableState.destroyed = value;\n      }\n    }\n  }\n});\nlet webStreamsAdapters;\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {};\n  return webStreamsAdapters;\n}\nDuplex.fromWeb = function (pair, options) {\n  return lazyWebStreams().newStreamDuplexFromReadableWritablePair(pair, options);\n};\nDuplex.toWeb = function (duplex) {\n  return lazyWebStreams().newReadableWritablePairFromDuplex(duplex);\n};\nlet duplexify;\nDuplex.from = function (body) {\n  if (!duplexify) {\n    duplexify = require('./duplexify');\n  }\n  return duplexify(body, 'body');\n};","map":{"version":3,"names":["ObjectDefineProperties","ObjectGetOwnPropertyDescriptor","ObjectKeys","ObjectSetPrototypeOf","require","module","exports","Duplex","Readable","Writable","prototype","keys","i","length","method","options","call","allowHalfOpen","readable","_readableState","ended","endEmitted","writable","_writableState","ending","finished","__proto__","writableHighWaterMark","writableObjectMode","writableBuffer","writableLength","writableFinished","writableCorked","writableEnded","writableNeedDrain","destroyed","get","undefined","set","value","webStreamsAdapters","lazyWebStreams","fromWeb","pair","newStreamDuplexFromReadableWritablePair","toWeb","duplex","newReadableWritablePairFromDuplex","duplexify","from","body"],"sources":["/Users/jstanton/Coding/FieldDock/FieldDockMain/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/duplex.js"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototype inheritance, this class\n// prototypically inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict'\n\nconst {\n  ObjectDefineProperties,\n  ObjectGetOwnPropertyDescriptor,\n  ObjectKeys,\n  ObjectSetPrototypeOf\n} = require('../../ours/primordials')\nmodule.exports = Duplex\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nObjectSetPrototypeOf(Duplex.prototype, Readable.prototype)\nObjectSetPrototypeOf(Duplex, Readable)\n{\n  const keys = ObjectKeys(Writable.prototype)\n  // Allow the keys array to be GC'ed.\n  for (let i = 0; i < keys.length; i++) {\n    const method = keys[i]\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method]\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options)\n  Readable.call(this, options)\n  Writable.call(this, options)\n  if (options) {\n    this.allowHalfOpen = options.allowHalfOpen !== false\n    if (options.readable === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if (options.writable === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  } else {\n    this.allowHalfOpen = true\n  }\n}\nObjectDefineProperties(Duplex.prototype, {\n  writable: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writable')\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableHighWaterMark')\n  },\n  writableObjectMode: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableObjectMode')\n  },\n  writableBuffer: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableBuffer')\n  },\n  writableLength: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableLength')\n  },\n  writableFinished: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableFinished')\n  },\n  writableCorked: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableCorked')\n  },\n  writableEnded: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableEnded')\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableNeedDrain')\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return false\n      }\n      return this._readableState.destroyed && this._writableState.destroyed\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      if (this._readableState && this._writableState) {\n        this._readableState.destroyed = value\n        this._writableState.destroyed = value\n      }\n    }\n  }\n})\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nDuplex.fromWeb = function (pair, options) {\n  return lazyWebStreams().newStreamDuplexFromReadableWritablePair(pair, options)\n}\nDuplex.toWeb = function (duplex) {\n  return lazyWebStreams().newReadableWritablePairFromDuplex(duplex)\n}\nlet duplexify\nDuplex.from = function (body) {\n  if (!duplexify) {\n    duplexify = require('./duplexify')\n  }\n  return duplexify(body, 'body')\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}